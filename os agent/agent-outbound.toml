[agent]
bind_address = "0.0.0.0:8443"
log_level = "info"
max_connections = 100
request_timeout = 30

[security]
allowed_ips = ["0.0.0.0/0"]
rate_limit_requests = 100
rate_limit_window = 60
require_client_cert = false

[scripts]
openvpn_create = "/opt/Viworks/scripts_viworks/add_vpn_user.sh"
openvpn_delete = "/opt/Viworks/scripts_viworks/delete_vpn_user.sh"
panel_create = "/opt/Viworks/scripts_viworks/add_user.sh"
panel_delete = "/opt/Viworks/scripts_viworks/delete_user.sh"

[monitoring]
collect_interval = 30
retention_days = 30
metrics_enabled = true

[containers]
base_image = "viworks/chrome:latest"
memory_limit = "512m"
cpu_limit = "0.5"
network_mode = "bridge"
port_range_start = 8000
port_range_end = 9000

[outbound]
# Backend connection URL (WebSocket) - DIRECT IP BYPASS
backend_url = "ws://64.227.46.188:8081"

# Agent identification
agent_id = "os-agent-178-128-42-148"
site = "production"

# mTLS client certificates (disabled for now)
# cert_path = "/opt/viworks/agent/certs/client.crt"
# key_path = "/opt/viworks/agent/certs/client.key"
# trust_bundle = "/opt/viworks/agent/certs/ca.crt"

# SPKI pin for backend certificate validation (disabled for now)
# backend_spki_pin = "your-backend-spki-pin-here"

# Feature flags
feature_inbound_http = false  # Disable inbound HTTP in production
feature_exec_enable = true    # Enable command execution

# Scripts and execution
scripts_root = "/opt/Viworks/scripts_viworks"
max_concurrency = 4           # Maximum concurrent command executions
cmd_timeout_secs = 45         # Command execution timeout

# Container engine
container_engine = "docker"
